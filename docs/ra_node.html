<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module ra_node</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module ra_node</h1>
<ul class="index"><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>


<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-machine_conf">machine_conf()</a></h3>
<p><tt>machine_conf() = {simple, <a href="#type-simple_apply_fun">simple_apply_fun</a>(term()), State::term()} | {module, module(), map()}</tt></p>


<h3 class="typedecl"><a name="type-ra_await_condition_fun">ra_await_condition_fun()</a></h3>
<p><tt>ra_await_condition_fun() = fun((<a href="#type-ra_msg">ra_msg()</a>, <a href="#type-ra_node_state">ra_node_state()</a>) -&gt; boolean())</tt></p>


<h3 class="typedecl"><a name="type-ra_effect">ra_effect()</a></h3>
<p><tt>ra_effect() = <a href="ra_machine.html#type-effect">ra_machine:effect()</a> | {reply, <a href="#type-ra_reply_body">ra_reply_body()</a>} | {reply, term(), <a href="#type-ra_reply_body">ra_reply_body()</a>} | {cast, <a href="#type-ra_node_id">ra_node_id()</a>, term()} | {send_vote_requests, [{<a href="#type-ra_node_id">ra_node_id()</a>, #request_vote_rpc{} | #pre_vote_rpc{}}]} | {send_rpcs, [{<a href="#type-ra_node_id">ra_node_id()</a>, #append_entries_rpc{}}]} | {next_event, <a href="#type-ra_msg">ra_msg()</a>} | {next_event, cast, <a href="#type-ra_msg">ra_msg()</a>} | {notify, pid(), reference()} | {incr_metrics, Table::atom(), [{Pos::non_neg_integer(), Incr::integer()}]}</tt></p>


<h3 class="typedecl"><a name="type-ra_effects">ra_effects()</a></h3>
<p><tt>ra_effects() = [<a href="#type-ra_effect">ra_effect()</a>]</tt></p>


<h3 class="typedecl"><a name="type-ra_msg">ra_msg()</a></h3>
<p><tt>ra_msg() = #append_entries_rpc{} | {<a href="#type-ra_node_id">ra_node_id()</a>, #append_entries_reply{}} | {<a href="#type-ra_node_id">ra_node_id()</a>, #install_snapshot_result{}} | #request_vote_rpc{} | #request_vote_result{} | #pre_vote_rpc{} | #pre_vote_result{} | #install_snapshot_rpc{} | election_timeout | await_condition_timeout | {command, term()}</tt></p>


<h3 class="typedecl"><a name="type-ra_node_config">ra_node_config()</a></h3>
<p><tt>ra_node_config() = #{id := <a href="#type-ra_node_id">ra_node_id()</a>, uid := <a href="#type-ra_uid">ra_uid()</a>, cluster_id := <a href="#type-ra_cluster_id">ra_cluster_id()</a>, log_init_args := <a href="ra_log.html#type-ra_log_init_args">ra_log:ra_log_init_args()</a>, initial_nodes := [<a href="#type-ra_node_id">ra_node_id()</a>], machine := <a href="#type-machine_conf">machine_conf()</a>, broadcast_time =&gt; non_neg_integer(), tick_timeout =&gt; non_neg_integer(), await_condition_timeout =&gt; non_neg_integer()}</tt></p>


<h3 class="typedecl"><a name="type-ra_node_state">ra_node_state()</a></h3>
<p><tt>ra_node_state() = #{id =&gt; <a href="#type-ra_node_id">ra_node_id()</a>, uid =&gt; <a href="#type-ra_uid">ra_uid()</a>, leader_id =&gt; <a href="#type-maybe">maybe</a>(<a href="#type-ra_node_id">ra_node_id()</a>), cluster =&gt; <a href="#type-ra_cluster">ra_cluster()</a>, cluster_change_permitted =&gt; boolean(), cluster_index_term =&gt; <a href="#type-ra_idxterm">ra_idxterm()</a>, pending_cluster_changes =&gt; [term()], previous_cluster =&gt; {<a href="#type-ra_index">ra_index()</a>, <a href="#type-ra_term">ra_term()</a>, <a href="#type-ra_cluster">ra_cluster()</a>}, current_term =&gt; <a href="#type-ra_term">ra_term()</a>, log =&gt; term(), voted_for =&gt; <a href="#type-maybe">maybe</a>(<a href="#type-ra_node_id">ra_node_id()</a>), votes =&gt; non_neg_integer(), commit_index =&gt; <a href="#type-ra_index">ra_index()</a>, last_applied =&gt; <a href="#type-ra_index">ra_index()</a>, persisted_last_applied =&gt; <a href="#type-ra_index">ra_index()</a>, stop_after =&gt; <a href="#type-ra_index">ra_index()</a>, machine =&gt; <a href="ra_machine.html#type-machine">ra_machine:machine()</a>, machine_state =&gt; term(), aux_state =&gt; term(), condition =&gt; <a href="#type-ra_await_condition_fun">ra_await_condition_fun()</a>, condition_timeout_effects =&gt; [<a href="#type-ra_effect">ra_effect()</a>], pre_vote_token =&gt; reference()}</tt></p>


<h3 class="typedecl"><a name="type-ra_reply_body">ra_reply_body()</a></h3>
<p><tt>ra_reply_body() = #append_entries_reply{} | #request_vote_result{} | #pre_vote_result{}</tt></p>


<h3 class="typedecl"><a name="type-ra_state">ra_state()</a></h3>
<p><tt>ra_state() = leader | follower | candidate | pre_vote | await_condition | delete_and_terminate | stop</tt></p>


<h3 class="typedecl"><a name="type-simple_apply_fun">simple_apply_fun()</a></h3>
<p><tt>simple_apply_fun(State) = fun((term(), State) -&gt; State)</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#current_term-1">current_term/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_aux-4">handle_aux/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_await_condition-2">handle_await_condition/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_candidate-2">handle_candidate/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_follower-2">handle_follower/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_leader-2">handle_leader/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_pre_vote-2">handle_pre_vote/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#id-1">id/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#init-1">init/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_fully_persisted-1">is_fully_persisted/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_fully_replicated-1">is_fully_replicated/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_new-1">is_new/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#leader_id-1">leader_id/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#log_fold-3">log_fold/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#machine-1">machine/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#make_rpcs-1">make_rpcs/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#name-2">name/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#overview-1">overview/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#persist_last_applied-1">persist_last_applied/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#recover-1">recover/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#terminate-2">terminate/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#tick-1">tick/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#uid-1">uid/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#update_release_cursor-3">update_release_cursor/3</a></td><td></td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="current_term-1">current_term/1</a></h3>
<div class="spec">
<p><tt>current_term(State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-maybe">maybe</a>(<a href="#type-ra_term">ra_term()</a>)</tt><br></p>
</div>

<h3 class="function"><a name="handle_aux-4">handle_aux/4</a></h3>
<div class="spec">
<p><tt>handle_aux(RaftState, Type, Cmd, State0) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_await_condition-2">handle_await_condition/2</a></h3>
<div class="spec">
<p><tt>handle_await_condition(Request_vote_rpc::<a href="#type-ra_msg">ra_msg()</a>, State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; {<a href="#type-ra_state">ra_state()</a>, <a href="#type-ra_node_state">ra_node_state()</a>, <a href="#type-ra_effects">ra_effects()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="handle_candidate-2">handle_candidate/2</a></h3>
<div class="spec">
<p><tt>handle_candidate(Request_vote_result::<a href="#type-ra_msg">ra_msg()</a> | election_timeout, State0::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; {<a href="#type-ra_state">ra_state()</a>, <a href="#type-ra_node_state">ra_node_state()</a>, <a href="#type-ra_effects">ra_effects()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="handle_follower-2">handle_follower/2</a></h3>
<div class="spec">
<p><tt>handle_follower(Append_entries_rpc::<a href="#type-ra_msg">ra_msg()</a>, State000::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; {<a href="#type-ra_state">ra_state()</a>, <a href="#type-ra_node_state">ra_node_state()</a>, <a href="#type-ra_effects">ra_effects()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="handle_leader-2">handle_leader/2</a></h3>
<div class="spec">
<p><tt>handle_leader(Install_snapshot_rpc::<a href="#type-ra_msg">ra_msg()</a>, State0::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; {<a href="#type-ra_state">ra_state()</a>, <a href="#type-ra_node_state">ra_node_state()</a>, <a href="#type-ra_effects">ra_effects()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="handle_pre_vote-2">handle_pre_vote/2</a></h3>
<div class="spec">
<p><tt>handle_pre_vote(Append_entries_rpc::<a href="#type-ra_msg">ra_msg()</a>, State0::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; {<a href="#type-ra_state">ra_state()</a>, <a href="#type-ra_node_state">ra_node_state()</a>, <a href="#type-ra_effects">ra_effects()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="id-1">id/1</a></h3>
<div class="spec">
<p><tt>id(X1::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-ra_node_id">ra_node_id()</a></tt><br></p>
</div>

<h3 class="function"><a name="init-1">init/1</a></h3>
<div class="spec">
<p><tt>init(Config::<a href="#type-ra_node_config">ra_node_config()</a>) -&gt; {<a href="#type-ra_node_state">ra_node_state()</a>, <a href="#type-ra_effects">ra_effects()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="is_fully_persisted-1">is_fully_persisted/1</a></h3>
<div class="spec">
<p><tt>is_fully_persisted(X1::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; boolean()</tt><br></p>
</div>

<h3 class="function"><a name="is_fully_replicated-1">is_fully_replicated/1</a></h3>
<div class="spec">
<p><tt>is_fully_replicated(State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; boolean()</tt><br></p>
</div>

<h3 class="function"><a name="is_new-1">is_new/1</a></h3>
<div class="spec">
<p><tt>is_new(X1::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; boolean()</tt><br></p>
</div>

<h3 class="function"><a name="leader_id-1">leader_id/1</a></h3>
<div class="spec">
<p><tt>leader_id(State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-maybe">maybe</a>(<a href="#type-ra_node_id">ra_node_id()</a>)</tt><br></p>
</div>

<h3 class="function"><a name="log_fold-3">log_fold/3</a></h3>
<div class="spec">
<p><tt>log_fold(RaState::<a href="#type-ra_node_state">ra_node_state()</a>, Fun::fun((term(), State) -&gt; State), State) -&gt; {ok, State, <a href="#type-ra_node_state">ra_node_state()</a>} | {error, term(), <a href="#type-ra_node_state">ra_node_state()</a>}</tt><br></p>
</div>

<h3 class="function"><a name="machine-1">machine/1</a></h3>
<div class="spec">
<p><tt>machine(X1::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; module()</tt><br></p>
</div>

<h3 class="function"><a name="make_rpcs-1">make_rpcs/1</a></h3>
<div class="spec">
<p><tt>make_rpcs(State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="name-2">name/2</a></h3>
<div class="spec">
<p><tt>name(ClusterId::string(), UniqueSuffix::string()) -&gt; atom()</tt><br></p>
</div>

<h3 class="function"><a name="overview-1">overview/1</a></h3>
<div class="spec">
<p><tt>overview(State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; map()</tt><br></p>
</div>

<h3 class="function"><a name="persist_last_applied-1">persist_last_applied/1</a></h3>
<div class="spec">
<p><tt>persist_last_applied(State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-ra_node_state">ra_node_state()</a></tt><br></p>
</div>

<h3 class="function"><a name="recover-1">recover/1</a></h3>
<div class="spec">
<p><tt>recover(State0) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="terminate-2">terminate/2</a></h3>
<div class="spec">
<p><tt>terminate(State::<a href="#type-ra_node_state">ra_node_state()</a>, Reason::{shutdown, delete} | term()) -&gt; ok</tt><br></p>
</div>

<h3 class="function"><a name="tick-1">tick/1</a></h3>
<div class="spec">
<p><tt>tick(X1::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-ra_effects">ra_effects()</a></tt><br></p>
</div>

<h3 class="function"><a name="uid-1">uid/1</a></h3>
<div class="spec">
<p><tt>uid(X1::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-ra_uid">ra_uid()</a></tt><br></p>
</div>

<h3 class="function"><a name="update_release_cursor-3">update_release_cursor/3</a></h3>
<div class="spec">
<p><tt>update_release_cursor(Index::<a href="#type-ra_index">ra_index()</a>, MacState::term(), State::<a href="#type-ra_node_state">ra_node_state()</a>) -&gt; <a href="#type-ra_node_state">ra_node_state()</a></tt><br></p>
</div>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
